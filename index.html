<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Music Sequencer Pro</title>
    <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <div class="app-container">

    <!-- Top Toolbar -->
    <header class="toolbar">
<!-- Playback Module -->
<section class="playback-module">
  <div class="controls">
    <button class="btn blue">New</button>
    <button class="btn play" id="playBtn">â–¶ Play</button>
    <button class="btn stop" id="stopBtn">â–  Stop</button>
    <button class="btn loop" id="loopBtn">Loop</button>
    <select class="loop-duration" id="loopDuration">
      <option value="5">Loop 5s</option>
      <option value="10">Loop 10s</option>
      <option value="15">Loop 15s</option>
      <option value="20">Loop 20s</option>
    </select>
  </div>

  <div class="meters">
    <div class="volume-meter">
      <div class="meter-bar" id="volumeBar"></div>
    </div>

    <div class="tempo-detector">
      <label>ðŸŽµ Tempo</label>
      <input type="number" id="tempoInput" value="120" min="60" max="200" /> BPM
    </div>
  </div>
</section>
      <div class="toolbar-right">
        <select class="genre-select" id="genreSelect">
          <option>EDM</option>
          <option>Hip Hop</option>
          <option>Pop</option>
          <option>Rock</option>
        </select>
        <button class="btn" onclick="generateTemplate()">Generate Template</button>
        <button class="btn">Export</button>
        <button class="btn">Settings</button>
      </div>
    </header>

    <!-- Workspace -->
    <main class="workspace">
      <!-- Track Controls -->
      <aside class="track-sidebar">
        <div class="track-label">Track 1</div>
        <div class="track-label">Track 2</div>
        <div class="track-label">Synth</div>
        <div class="track-label">Drums</div>
        <div class="track-label">Master</div>
      </aside>

      <!-- Step Editor -->
      <!-- Step Editor Time Ruler -->
<div class="time-ruler" id="timeRuler"></div>
      <section class="step-editor" id="stepEditor">
        <!-- Tracks will be dynamically created here -->
      </section>
      <!-- Playlist/Browser Sidebar -->
      <aside class="right-sidebar">
  <h4>Sample Library</h4>
  <input type="text" placeholder="Search samples..." />
  <!-- Navigation Controls -->
  <div class="library-controls">
      <button class="icon-btn" id="refreshBtn" title="Refresh Library">
    <svg viewBox="0 0 24 24" class="icon">
      <path d="M17.65 6.35A7.95 7.95 0 0012 4V1L7 6l5 5V7a6 6 0 11-6 6H4a8 8 0 108-8c-1.85 0-3.55.63-4.9 1.69l1.45 1.45A5.985 5.985 0 0112 6a6 6 0 015.65 3.65z" fill="currentColor"/>
    </svg>
  </button>
      <button class="icon-btn" id="toggleBtn" title="Toggle Categories">
    <svg viewBox="0 0 24 24" class="icon">
      <path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h12v2H3z" fill="currentColor"/>
    </svg>
  </button>
    <div class="playlist-nav">
          <button class="icon-btn" id="navLeft" title="Scroll Left">
      <svg viewBox="0 0 24 24" class="icon">
        <path d="M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z" fill="currentColor"/>
      </svg>
    </button>
          <button class="icon-btn" id="navRight" title="Scroll Right">
      <svg viewBox="0 0 24 24" class="icon">
        <path d="M8.59 16.59L10 18l6-6-6-6-1.41 1.41L13.17 12z" fill="currentColor"/>
      </svg>
    </button>
    </div>
  </div>
  <!-- Playlist Items -->
  <div class="playlist" id="samplePlaylist">
    <div class="playlist-item">Bass Samples</div>
    <div class="playlist-item">Drum Samples</div>
    <div class="playlist-item">FX Samples</div>
    <div class="playlist-item">Guitar Samples</div>
    <div class="playlist-item">Piano Samples</div>
    <div class="playlist-item">Percussion Samples</div>
    <div class="playlist-item">String Samples</div>
    <div class="playlist-item">Synth Samples</div>
    <div class="playlist-item">Vocal Samples</div>
    <div class="playlist-item">Storage (15GB) </div>
  </div>
  <button class="btn blue">Import .mp3 or .wav file</button>
</aside>
          </main>

    <!-- Presets Panel -->
    <<section class="preset-panel" id="presetPanel">
  <div class="preset-header">
    <h4>Presets</h4>
    <div class="mode-toggle">
      <button class="mode-btn active" id="composerBtn">Composer Mode</button>
      <button class="mode-btn" id="djBtn">DJ Mode</button>
    </div>
    <p>Select a track to view available presets.</p>
  </div>
  <div class="preset-options" id="presetOptions">
    <!-- Presets populate here -->
  </div>
</section>
  <!-- JavaScript -->
  
  <script>
    const stepEditor = document.getElementById("stepEditor");
const stepsPerTrack = 16;

function createStepRow(trackName) {
  const row = document.createElement("div");
  row.className = "step-row";

  const label = document.createElement("div");
  label.className = "step-label";
  label.textContent = trackName;
  row.appendChild(label);

  const grid = document.createElement("div");
  grid.className = "step-grid";

  for (let i = 0; i < stepsPerTrack; i++) {
    const step = document.createElement("div");
    step.className = "step";
    step.addEventListener("click", () => {
      step.classList.toggle("active");
    });
    grid.appendChild(step);
  }

  row.appendChild(grid);
  stepEditor.appendChild(row);
}

// Always start with a default sample track linked to Track 1
createStepRow("Synth");
    const presetOptions = document.getElementById("presetOptions");
    const presets = {
      "Synth Lead": ["Bright Pad", "Soft Keys", "Analog Lead"],
      "AI Melody": ["AI Jazz Improv", "AI EDM Hook", "AI Chill Lofi"],
      "FX Rack": ["Stereo Spread", "Reverb Space", "Vocal Chop"],
      "Drum Machine": ["Trap Kit", "Boom Bap Set", "808 Bassline"],
      "Master Bus": ["EDM Master", "Pop Shine", "Hip-Hop Punch"]
    };

    document.querySelectorAll(".lane").forEach((lane) => {
      lane.addEventListener("click", () => {
        const key = lane.textContent.replace(/^[^a-zA-Z]+/, "").trim();
        const matchedPresets = presets[key];
        presetOptions.innerHTML = "";

        if (matchedPresets) {
          matchedPresets.forEach(preset => {
            const tile = document.createElement("div");
            tile.className = "preset-tile";
            tile.textContent = preset;
            presetOptions.appendChild(tile);
          });
        } else {
          presetOptions.innerHTML = "<div class='preset-tile'>No presets available</div>";
        }
      });
    });

    function generateTemplate() {
      const genre = document.getElementById("genreSelect").value;
      alert(`AI is generating a ${genre} starter template...`);
      // Future: populate lanes/presets dynamically based on genre
    }
    const presetOptions = document.getElementById("presetOptions");
const stepEditor = document.getElementById("stepEditor");

const stepsPerTrack = 16;

// Pull the first track label from the DOM
const firstTrackLabel = document.querySelector(".track-label").textContent.trim();

// Build default track row
function createStepRow(trackName) {
  const row = document.createElement("div");
  row.className = "step-row";

  const label = document.createElement("div");
  label.className = "step-label";
  label.textContent = trackName;
  row.appendChild(label);

  const grid = document.createElement("div");
  grid.className = "step-grid";

  for (let i = 0; i < stepsPerTrack; i++) {
    const step = document.createElement("div");
    step.className = "step";
    step.addEventListener("click", () => {
      step.classList.toggle("active");
    });
    grid.appendChild(step);
  }

  row.appendChild(grid);
  stepEditor.appendChild(row);
}

// Always initialize first sample track
createStepRow(firstTrackLabel);

// Optional: Add other default tracks after the first
const additionalTracks = ["Drums", "Bass", "FX"];
additionalTracks.forEach(track => {
  createStepRow(track);
});

// Presets data
const presets = {
  Synth: ["Bright Pad", "Soft Keys", "Analog Lead"],
  Drums: ["808 Kit", "Acoustic Drums", "Perc FX"],
  Bass: ["Sub Bass", "Synth Bass", "Groove Bass"],
  FX: ["Echo Fall", "Reverse Hit", "Vinyl Noise"]
};

// Click to load presets from sidebar
document.querySelectorAll(".track-label").forEach((label) => {
  label.addEventListener("click", () => {
    const trackName = label.textContent.trim();
    const matchedPresets = presets[trackName] || [];
    presetOptions.innerHTML = "";

    if (matchedPresets.length) {
      matchedPresets.forEach((preset) => {
        const tile = document.createElement("div");
        tile.className = "preset-tile";
        tile.textContent = preset;
        presetOptions.appendChild(tile);
      });
    } else {
      presetOptions.innerHTML = "<div class='preset-tile'>No presets available</div>";
    }
  });
});

function generateTemplate() {
  const genre = document.getElementById("genreSelect").value;
  alert(`AI is generating a ${genre} starter template...`);
}
  </script>
  
</body>
</html>
